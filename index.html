<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Brandon Castellano">
        
        <link rel="shortcut icon" href="./img/favicon.ico">

	<title>OpenCV 3.0 Python Guide</title>

        <link href="./css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="./css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="./css/highlight.css">
        <link href="./css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href=".">OpenCV 3.0 Python Guide</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li class="active">
                    <a href=".">Installation</a>
                </li>
            
            
            
                <li >
                    <a href="migrating/">Migration & Changes</a>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li class="disabled">
                    <a rel="next" >
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="migrating/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/Breakthrough">
                        
                        Brandon Castellano
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#introduction-and-overview">Introduction and Overview</a></li>
        
    
        <li class="main "><a href="#installing-on-windows-pre-built-binaries">Installing on Windows (pre-built binaries)</a></li>
        
            <li><a href="#downloading-opencv-and-python">Downloading OpenCV and Python</a></li>
        
            <li><a href="#installing-module-dependencies">Installing Module Dependencies</a></li>
        
            <li><a href="#installing-python-opencv-module">Installing Python-OpenCV Module</a></li>
        
    
        <li class="main "><a href="#installing-on-linux-compiling-from-source">Installing on Linux (compiling from source)</a></li>
        
            <li><a href="#downloading-opencv">Downloading OpenCV</a></li>
        
            <li><a href="#installing-build-dependencies">Installing Build Dependencies</a></li>
        
            <li><a href="#compiling-and-installing-opencv">Compiling and Installing OpenCV</a></li>
        
    
        <li class="main "><a href="#verifying-installation">Verifying Installation</a></li>
        
    
        <li class="main "><a href="#linux-build-issues">Linux Build Issues</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h2 id="introduction-and-overview">Introduction and Overview</h2>
<p>This document contains instructions for installing and migrating to the latest release of OpenCV (version 3) and the Python bindings.  In addition to some API changes, there are also changes to the Python interface (e.g. removal of <code>cv2.cv</code>) that may require changes in existing code to work with the new version of the <code>cv2</code> module.  After installation, see the next page, <a href="migrating/"><strong>Migration &amp; Changes</strong></a>, for details regarding the changes to the module and for help migrating existing Python code to the new version.</p>
<hr />
<p>This page covers installing OpenCV 3 on Windows (using pre-built binaries) and Linux (compiled from source), including the Python interface (the <code>cv2</code> module).  OpenCV can be downloaded from <a href="http://opencv.org/downloads.html">the official OpenCV website</a>.  Note that this guide is written based on OpenCV version <strong>3.0-rc1</strong>.  After installation, it is recommended that you can check the version of OpenCV that Python is using:</p>
<pre><code>import cv2
print cv2.__version__

# Should print 3.0.0-rc1 or newer.
</code></pre>
<p>Note that although OpenCV 3.0 is the latest release, by convention, the module is still named <code>cv2</code>.</p>
<hr />
<h2 id="installing-on-windows-pre-built-binaries">Installing on Windows (pre-built binaries)</h2>
<p>Using pre-built binaries is the quickest way to get a Python OpenCV environment up and running on Windows.  Currently, only the Python 2 version of the <code>cv2</code> module is built and included in the latest Windows release.  Support for Python 3 (as well as adding other non-standard features/modules), requires compiling from source - see the official OpenCV documentation for details.</p>
<h4 id="downloading-opencv-and-python">Downloading OpenCV and Python</h4>
<p>To begin, <a href="http://opencv.org/downloads.html">download OpenCV</a> for Windows (<a href="http://sourceforge.net/projects/opencvlibrary/files/opencv-win/3.0.0-rc1/opencv-3.0.0-rc1.exe/download">version 3.0 RC1, <code>opencv-3.0.0-rc1.exe</code></a>), and extract it to a directory of your choice (e.g. <code>~/opencv-src</code>).  The Windows build includes both a 32-bit and 64-bit module for Python 2.7.</p>
<p>Before continuing, ensure that you have a working Python 2.7 installation, which can be downloaded from <a href="https://www.python.org/">the Python website</a>.  This guide was tested using Python 2.7.9 (<a href="https://www.python.org/ftp/python/2.7.9/python-2.7.9.msi">x86 installer</a> / <a href="https://www.python.org/ftp/python/2.7.9/python-2.7.9.amd64.msi">x64 installer</a>).  When installing, it is recommended that you allow the installer to add Python to your <code>PATH</code> environment variable, so you can run <code>python</code> and <code>pip</code> from a command prompt.</p>
<h4 id="installing-module-dependencies">Installing Module Dependencies</h4>
<p>The Python OpenCV <code>cv2</code> module requires both the <code>NumPy</code> and <code>SciPy</code> stack.  To get this, first ensure that you have a working <code>python</code> environment, and have <code>pip</code> installed (if not, use the links above, and ensure the Python folder is in your <code>PATH</code> variable).</p>
<p>Christoph Gohlke currently provides some (unofficial) <a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/">pre-built Python packages for Windows</a>, including NumPy and SciPy.  Download the latest stable versions of <a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/#numpy">NumPy</a> and <a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/#scipy">SciPy</a>, and install them by calling <code>pip install [module].whl</code> from a command prompt.  Note that you should download the version corresponding to your Python environment (2.7 in this case) and word length.  For example, on 32-bit systems/interpreters:</p>
<pre><code>pip install numpy-1.9.2+mkl-cp27-none-win32.whl
pip install scipy-0.15.1-cp27-none-win32.whl
</code></pre>
<p>And for 64-bit systems/interpreters:</p>
<pre><code>pip install numpy-1.9.2+mkl-cp27-none-win_amd64.whl
pip install scipy-0.15.1-cp27-none-win_amd64.whl
</code></pre>
<p>After installing, you should be able to run <code>import numpy</code> and <code>import scipy</code> from a Python interpreter to verify that the modules were installed correctly.  You can check what versions of NumPy and SciPy are installed from <code>numpy.__version__</code> and <code>scipy.__version__</code>, respectively.</p>
<h4 id="installing-python-opencv-module">Installing Python-OpenCV Module</h4>
<p>Lastly, we need to copy the OpenCV module into the local Python packages.  In the files extracted from <code>opencv-3.0.0-rc1.exe</code>, go to the folder <code>opencv/build/python/2.7/</code>, and open either the <code>x86/</code> (for 32-bit) or <code>x64/</code> (for 64-bit) folder.  In each, there will be a <code>cv2.pyd</code> file.</p>
<p>Copy <code>cv2.pyd</code> directly into the <code>Lib/site-packages/</code> directory of your Python installation.  For most users, this will be found at:</p>
<pre><code>C:/Python27/Lib/site-packages
</code></pre>
<p>And we're done!  Continue on to the <a href="#verifying-installation">Verifying Installation</a> section to ensure everything was installed correctly, and the new version of OpenCV is being used.  Also be sure to check out the next page, <a href="migrating/">Migration &amp; Changes</a>, for details about the changes to the module and updating existing code.</p>
<hr />
<h2 id="installing-on-linux-compiling-from-source">Installing on Linux (compiling from source)</h2>
<p>Although this guide is written for Ubuntu 12.04/14.04 and other variants (e.g. Xubuntu/Lubuntu/Kubuntu), the process should largely be the same on other versions, as well as similar Debian-like Linux distributions.  Pay attention to the output of each command to ensure everything worked correctly, and if there are any issues during the build process, see the bottom of this document for possible mitigations</p>
<h4 id="downloading-opencv">Downloading OpenCV</h4>
<p>To begin, <a href="http://opencv.org/downloads.html">download OpenCV</a> for Linux (<a href="https://github.com/Itseez/opencv/archive/3.0.0-rc1.zip">version 3.0 RC1, <code>opencv-3.0.0-rc1.zip</code></a>), and extract it to a directory of your choice (e.g. <code>~/opencv-src</code>).  Create a <code>build</code> folder inside the folder where the archive was extracted (the directory containing the <code>CMakeLists.txt</code> file), and open a terminal session there.  For example:</p>
<pre><code># Assuming the files were extracted to ~/opencv-src/...
cd ~/opencv-src
mkdir build
cd build
</code></pre>
<p>Execute all of following commands from the <code>build</code> sub-folder itself, so the compiled files will be placed there.</p>
<h4 id="installing-build-dependencies">Installing Build Dependencies</h4>
<p>To compile OpenCV, we must ensure that the required dependencies are available, including the build tools themselves.  We can get the required ones using <code>apt</code> on Ubuntu, but first, ensure the package list is up-to-date by running <code>apt-get update</code>.  Next, execute the following commands to get the required packages (see below for a one-line list of all):</p>
<pre><code>sudo apt-get install cmake build-essential pkg-config

sudo apt-get install libgtk2.0-dev libtbb-dev

sudo apt-get install python-dev python-numpy python-scipy

sudo apt-get install libjasper-dev  libjpeg-dev libpng-dev libtiff-dev

sudo apt-get install libavcodec-dev libavutil-dev libavformat-dev libswscale-dev

sudo apt-get install libdc1394-22-dev libv4l-dev
</code></pre>
<p>Note that for additional OpenCV modules/features (e.g. GPU/CUDA support, or Python 3 module), you will need to download the respective development/SDK packages for those libraries as well.  The dependencies listed above only cover building OpenCV itself and the Python 2.7 <code>cv2</code> module.</p>
<h4 id="compiling-and-installing-opencv">Compiling and Installing OpenCV</h4>
<p>a</p>
<pre><code>  mkdir build
  cd build
  cmake -D CMAKE_BUILD_TYPE=Release -D CMAKE_INSTALL_PREFIX=/usr/local ..
</code></pre>
<p>If there are any errors, ensure that you downloaded all the required packages - the output should help track down what is missing.  To ensure the Python module will be built, in the output, you should see the following:</p>
<pre><code>[...]

--     Linker flags (Release):
--     Linker flags (Debug):
--     Precompiled headers:      YES
--
--   OpenCV modules:
--     To be built:              hal core flann imgproc ml photo video [...] python2

[...]
</code></pre>
<p>If you do not see the <code>python2</code> module listed in the "To be built" list, check that you have the proper development packages installed, remove all files from the <code>build/</code> folder, and try running the <code>cmake</code> command again.</p>
<p>Once the configuration is complete, we can build OpenCV and the Python module, and install it to our system:</p>
<pre><code>make
sudo make install
</code></pre>
<p><strong>Ensure that the build was successful after calling <code>make</code> and check the output before installing.</strong> If you run into build issues/errors, again ensure that you have all the required dependencies and header files on your system.  If there are actual build issues with OpenCV itself, see the <a href="#linux-build-issues"><strong>Linux Build Issues</strong></a> section below for some possible workarounds.</p>
<p>When installing OpenCV 3.0-rc1 on Ubuntu 12.04, I ran into build errors regarding some missing codec <code>#define</code> entries.  As mentioned, the steps to do this are <a href="#linux-build-issues">detailed below</a> should you run into the same problem.  Conversely, on Ubuntu 14.04, the build completed successfully without any modifications.</p>
<p>If you can't <code>import cv2</code> from a Python shell after running <code>sudo make install</code>, but the build was successful, you can install the module manually.  This is done by copying the <code>cv2.so</code> file from the <code>build/lib/</code> directory to your local <code>python2.7/dist-packages/</code> folder.  From the <code>build/</code> folder, this can be done by:</p>
<pre><code>sudo cp lib/cv2.so /usr/local/lib/python2.7/dist-packages/
</code></pre>
<p>After this step, the <code>cv2</code> module is installed, and can now be used by your Python environment. Continue on to the <a href="#verifying-installation">Verifying Installation</a> section to ensure everything was installed correctly, and more importantly, that the proper version of OpenCV is being used bu Python.  Also be sure to check out the next page, <a href="migrating/">Migration &amp; Changes</a>, for details about the changes to the module and updating existing code.</p>
<hr />
<h2 id="verifying-installation">Verifying Installation</h2>
<p>As mentioned previously, you can verify that the <code>cv2</code> module was installed correctly by executing the following in a Python shell:</p>
<pre><code>import cv2
print cv2.__version__
</code></pre>
<p>Assuming the correct version string is printed, everything should be installed correctly at this point.</p>
<p>Note that there are some major changes to the <code>cv2</code> module hierarchy itself, and Python programs written with OpenCV 2.4.x in mind may not work properly anymore.  See the next section, <a href="migrating/"><strong>Migration &amp; Changes</strong></a> for details about the changes, and how to modify programs to deal with the changes.</p>
<hr />
<h2 id="linux-build-issues">Linux Build Issues</h2>
<p>Section still under development.</p></div>
        </div>

        

        <script src="./js/jquery-1.10.2.min.js"></script>
        <script src="./js/bootstrap-3.0.3.min.js"></script>
        <script src="./js/highlight.pack.js"></script>
        <script src="./js/base.js"></script>
    </body>
</html>